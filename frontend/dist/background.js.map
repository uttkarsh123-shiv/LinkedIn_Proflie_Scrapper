{"version":3,"file":"background.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://reactjs-chrome/./src/background/background.ts"],"sourcesContent":["\"use strict\";\r\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n    if (message.action === \"scrapeProfiles\") {\r\n        const profiles = message.profiles;\r\n        let index = 0;\r\n        function openNextProfile() {\r\n            if (index >= profiles.length)\r\n                return;\r\n            chrome.tabs.create({ url: profiles[index], active: false }, (tab) => {\r\n                if (!tab.id)\r\n                    return;\r\n                chrome.scripting.executeScript({\r\n                    target: { tabId: tab.id },\r\n                    files: [\"contentScript.js\"],\r\n                });\r\n                const listener = (msg, sender) => {\r\n                    var _a;\r\n                    if (msg.action === \"profileData\" && ((_a = sender.tab) === null || _a === void 0 ? void 0 : _a.id) === tab.id) {\r\n                        fetch(\"http://localhost:5000/profiles\", {\r\n                            method: \"POST\",\r\n                            headers: { \"Content-Type\": \"application/json\" },\r\n                            body: JSON.stringify(msg.data),\r\n                        })\r\n                            .then(() => {\r\n                            console.log(\"Profile saved:\", msg.data.name);\r\n                            chrome.runtime.sendMessage({ action: \"profileSaved\" });\r\n                        })\r\n                            .catch((err) => console.error(\"Error saving profile:\", err));\r\n                        chrome.runtime.onMessage.removeListener(listener);\r\n                        if (tab.id)\r\n                            chrome.tabs.remove(tab.id);\r\n                        index++;\r\n                        openNextProfile();\r\n                    }\r\n                };\r\n                chrome.runtime.onMessage.addListener(listener);\r\n            });\r\n        }\r\n        openNextProfile();\r\n    }\r\n});\r\n"],"names":[],"sourceRoot":""}