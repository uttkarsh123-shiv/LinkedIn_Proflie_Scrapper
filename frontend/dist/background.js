(()=>{"use strict";chrome.runtime.onMessage.addListener((e,t,o)=>{if("scrapeProfiles"===e.action){const r=e.profiles;let i=0;function n(){i>=r.length||chrome.tabs.create({url:r[i],active:!1},e=>{if(!e.id)return;chrome.scripting.executeScript({target:{tabId:e.id},files:["contentScript.js"]});const t=(o,r)=>{var a;"profileData"===o.action&&(null===(a=r.tab)||void 0===a?void 0:a.id)===e.id&&(fetch("http://localhost:5000/profiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.data)}).then(()=>{console.log("Profile saved:",o.data.name),chrome.runtime.sendMessage({action:"profileSaved"})}).catch(e=>console.error("Error saving profile:",e)),chrome.runtime.onMessage.removeListener(t),e.id&&chrome.tabs.remove(e.id),i++,n())};chrome.runtime.onMessage.addListener(t)})}n()}})})();